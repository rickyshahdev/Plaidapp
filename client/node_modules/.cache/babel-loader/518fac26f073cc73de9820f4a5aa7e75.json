{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ricky/Desktop/PROJECTS/mern-plaid/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ricky/Desktop/PROJECTS/mern-plaid/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/ricky/Desktop/PROJECTS/mern-plaid/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ricky/Desktop/PROJECTS/mern-plaid/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ricky/Desktop/PROJECTS/mern-plaid/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ricky/Desktop/PROJECTS/mern-plaid/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ricky/Desktop/PROJECTS/mern-plaid/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/ricky/Desktop/PROJECTS/mern-plaid/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/ricky/Desktop/PROJECTS/mern-plaid/client/src/components/dashboard/Accounts.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport PlaidLinkButton from \"react-plaid-link-button\";\nimport Plaid from \"plaid\";\nimport $ from \"jquery\";\nimport { connect } from \"react-redux\";\nimport { getTransactions, addAccount, deleteAccount } from \"../../actions/accountActions\";\nimport { logoutUser } from \"../../actions/authActions\";\nimport MaterialTable from \"material-table\"; // https://mbrn.github.io/material-table/#/\n\nvar Accounts = /*#__PURE__*/function (_Component) {\n  _inherits(Accounts, _Component);\n\n  function Accounts() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Accounts);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Accounts)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleOnSuccess = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token, metadata) {\n        var accounts, plaidData;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                accounts = _this.props.accounts;\n                _context.next = 3;\n                return token;\n\n              case 3:\n                _context.t0 = _context.sent;\n                _context.t1 = metadata;\n                _context.t2 = accounts;\n                plaidData = {\n                  public_token: _context.t0,\n                  metadata: _context.t1,\n                  accounts: _context.t2\n                };\n\n                // send public_token to server\n                _this.props.addAccount(plaidData);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.onDeleteClick = function (id) {\n      var accounts = _this.props.accounts;\n      var accountData = {\n        id: id,\n        accounts: accounts\n      };\n\n      _this.props.deleteAccount(accountData);\n    };\n\n    _this.onLogoutClick = function (e) {\n      e.preventDefault();\n\n      _this.props.logoutUser();\n    };\n\n    _this.render = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _this$props, user, accounts, _yield$_this$props$pl, transactions, transactionsLoading, accountItems, transactionsColumns, transactionsData;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$props = _this.props, user = _this$props.user, accounts = _this$props.accounts;\n              _context2.next = 3;\n              return _this.props.plaid;\n\n            case 3:\n              _yield$_this$props$pl = _context2.sent;\n              transactions = _yield$_this$props$pl.transactions;\n              transactionsLoading = _yield$_this$props$pl.transactionsLoading;\n              accountItems = accounts.map(function (account) {\n                return /*#__PURE__*/React.createElement(\"li\", {\n                  key: account._id,\n                  style: {\n                    marginTop: \"1rem\"\n                  },\n                  __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 56,\n                    columnNumber: 7\n                  }\n                }, /*#__PURE__*/React.createElement(\"button\", {\n                  style: {\n                    marginRight: \"1rem\"\n                  },\n                  onClick: _this.onDeleteClick.bind(_assertThisInitialized(_assertThisInitialized(_this)), account._id),\n                  className: \"btn btn-small btn-floating waves-effect waves-light hoverable red accent-3\",\n                  __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 57,\n                    columnNumber: 9\n                  }\n                }, /*#__PURE__*/React.createElement(\"i\", {\n                  className: \"material-icons\",\n                  __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 62,\n                    columnNumber: 11\n                  }\n                }, \"delete\")), /*#__PURE__*/React.createElement(\"b\", {\n                  __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 64,\n                    columnNumber: 9\n                  }\n                }, account.institutionName));\n              }); // Setting up data table\n\n              transactionsColumns = [{\n                title: \"Account\",\n                field: \"account\"\n              }, {\n                title: \"Date\",\n                field: \"date\",\n                type: \"date\",\n                defaultSort: \"desc\"\n              }, {\n                title: \"Name\",\n                field: \"name\"\n              }, {\n                title: \"Amount\",\n                field: \"amount\"\n              }, {\n                title: \"Category\",\n                field: \"category\"\n              }];\n              transactionsData = [];\n              transactions.forEach(function (account) {\n                account.transactions.forEach(function (transaction) {\n                  transactionsData.push({\n                    account: account.accountName,\n                    date: transaction.date,\n                    category: transaction.category[0],\n                    name: transaction.name,\n                    amount: transaction.amount\n                  });\n                });\n              });\n              return _context2.abrupt(\"return\", /*#__PURE__*/React.createElement(\"div\", {\n                className: \"row\",\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 7\n                }\n              }, /*#__PURE__*/React.createElement(\"div\", {\n                className: \"col s12\",\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 9\n                }\n              }, /*#__PURE__*/React.createElement(\"button\", {\n                onClick: _this.onLogoutClick,\n                className: \"btn-flat waves-effect\",\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 11\n                }\n              }, /*#__PURE__*/React.createElement(\"i\", {\n                className: \"material-icons left\",\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 13\n                }\n              }, \"keyboard_backspace\"), \" Log Out\"), /*#__PURE__*/React.createElement(\"h4\", {\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 11\n                }\n              }, /*#__PURE__*/React.createElement(\"b\", {\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 13\n                }\n              }, \"Welcome!\")), /*#__PURE__*/React.createElement(\"p\", {\n                className: \"grey-text text-darken-1\",\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 11\n                }\n              }, \"Hey there, \", user.name.split(\" \")[0]), /*#__PURE__*/React.createElement(\"h5\", {\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 11\n                }\n              }, /*#__PURE__*/React.createElement(\"b\", {\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 13\n                }\n              }, \"Linked Accounts\")), /*#__PURE__*/React.createElement(\"p\", {\n                className: \"grey-text text-darken-1\",\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 11\n                }\n              }, \"Add or remove your bank accounts below\"), /*#__PURE__*/React.createElement(\"ul\", {\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 11\n                }\n              }, accountItems), /*#__PURE__*/React.createElement(PlaidLinkButton, {\n                buttonProps: {\n                  className: \"btn btn-large waves-effect waves-light hoverable blue accent-3 main-btn\"\n                },\n                plaidLinkProps: {\n                  clientName: \"BankLinker\",\n                  key: \" \",\n                  token: \"link-sandbox-4be795dd-ba66-4ee9-ac53-ab8070e47bfc\",\n                  env: \"sandbox\",\n                  product: [\"transactions\"],\n                  onSuccess: _this.handleOnSuccess\n                },\n                onScriptLoad: function onScriptLoad() {\n                  return _this.setState({\n                    loaded: true\n                  });\n                },\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 11\n                }\n              }, \"Add Account\"), /*#__PURE__*/React.createElement(\"hr\", {\n                style: {\n                  marginTop: \"2rem\",\n                  opacity: \".2\"\n                },\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 11\n                }\n              }), /*#__PURE__*/React.createElement(\"h5\", {\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 11\n                }\n              }, /*#__PURE__*/React.createElement(\"b\", {\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 13\n                }\n              }, \"Transactions\")), transactionsLoading ? /*#__PURE__*/React.createElement(\"p\", {\n                className: \"grey-text text-darken-1\",\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 13\n                }\n              }, \"Fetching transactions...\") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n                className: \"grey-text text-darken-1\",\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 15\n                }\n              }, \"You have \", /*#__PURE__*/React.createElement(\"b\", {\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 26\n                }\n              }, transactionsData.length), \" transactions from your\", /*#__PURE__*/React.createElement(\"b\", {\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 17\n                }\n              }, \" \", accounts.length), \" linked\", accounts.length > 1 ? /*#__PURE__*/React.createElement(\"span\", {\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 19\n                }\n              }, \" accounts \") : /*#__PURE__*/React.createElement(\"span\", {\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 19\n                }\n              }, \" account \"), \"from the past 30 days\"), /*#__PURE__*/React.createElement(MaterialTable, {\n                columns: transactionsColumns,\n                data: transactionsData,\n                title: \"Search Transactions\",\n                __self: _assertThisInitialized(_assertThisInitialized(_this)),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 15\n                }\n              })))));\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _this;\n  }\n\n  _createClass(Accounts, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var accounts = this.props.accounts;\n      this.props.getTransactions(accounts);\n    } // Add account\n\n  }]);\n\n  return Accounts;\n}(Component);\n\nAccounts.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  getTransactions: PropTypes.func.isRequired,\n  addAccount: PropTypes.func.isRequired,\n  deleteAccount: PropTypes.func.isRequired,\n  accounts: PropTypes.array.isRequired,\n  plaid: PropTypes.object.isRequired,\n  user: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    plaid: state.plaid\n  };\n};\n\nexport default connect(mapStateToProps, {\n  logoutUser: logoutUser,\n  getTransactions: getTransactions,\n  addAccount: addAccount,\n  deleteAccount: deleteAccount\n})(Accounts);","map":{"version":3,"sources":["/Users/ricky/Desktop/PROJECTS/mern-plaid/client/src/components/dashboard/Accounts.js"],"names":["React","Component","PropTypes","PlaidLinkButton","Plaid","$","connect","getTransactions","addAccount","deleteAccount","logoutUser","MaterialTable","Accounts","handleOnSuccess","token","metadata","accounts","props","plaidData","public_token","onDeleteClick","id","accountData","onLogoutClick","e","preventDefault","render","user","plaid","transactions","transactionsLoading","accountItems","map","account","_id","marginTop","marginRight","bind","institutionName","transactionsColumns","title","field","type","defaultSort","transactionsData","forEach","transaction","push","accountName","date","category","name","amount","split","className","clientName","key","env","product","onSuccess","setState","loaded","opacity","length","propTypes","func","isRequired","array","object","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport PlaidLinkButton from \"react-plaid-link-button\";\nimport Plaid from \"plaid\";\nimport $ from \"jquery\";\nimport { connect } from \"react-redux\";\nimport {\n  getTransactions,\n  addAccount,\n  deleteAccount\n} from \"../../actions/accountActions\";\nimport { logoutUser } from \"../../actions/authActions\";\nimport MaterialTable from \"material-table\"; // https://mbrn.github.io/material-table/#/\nclass Accounts extends Component {\n  componentDidMount() {\n    const { accounts } = this.props;\n    this.props.getTransactions(accounts);\n  }\n\n\n// Add account\n\n handleOnSuccess = async (token, metadata) => {\n    const { accounts } = this.props;\n\n  const plaidData =  {\n      public_token: await token,\n      metadata: metadata,\n      accounts: accounts,\n\n    };\n    // send public_token to server\n\nthis.props.addAccount(plaidData);\n\n  };\n// Delete account\n  onDeleteClick = id => {\n    const { accounts } = this.props;\n    const accountData = {\n      id: id,\n      accounts: accounts\n    };\n    this.props.deleteAccount(accountData);\n  };\n// Logout\n  onLogoutClick = e => {\n    e.preventDefault();\n    this.props.logoutUser();\n  };\n\nrender = async () => {\n    const { user, accounts } = this.props;\n    const { transactions, transactionsLoading } = await this.props.plaid;\nlet accountItems = accounts.map(account => (\n      <li key={account._id} style={{ marginTop: \"1rem\" }}>\n        <button\n          style={{ marginRight: \"1rem\" }}\n          onClick={this.onDeleteClick.bind(this, account._id)}\n          className=\"btn btn-small btn-floating waves-effect waves-light hoverable red accent-3\"\n        >\n          <i className=\"material-icons\">delete</i>\n        </button>\n        <b>{account.institutionName}</b>\n      </li>\n    ));\n// Setting up data table\n    const transactionsColumns = [\n      { title: \"Account\", field: \"account\" },\n      { title: \"Date\", field: \"date\", type: \"date\", defaultSort: \"desc\" },\n      { title: \"Name\", field: \"name\" },\n      { title: \"Amount\", field: \"amount\" },\n      { title: \"Category\", field: \"category\" }\n    ];\nlet transactionsData = [];\n    transactions.forEach(function(account) {\n      account.transactions.forEach(function(transaction) {\n        transactionsData.push({\n          account: account.accountName,\n          date: transaction.date,\n          category: transaction.category[0],\n          name: transaction.name,\n          amount: transaction.amount\n        });\n      });\n    });\nreturn (\n      <div className=\"row\">\n        <div className=\"col s12\">\n          <button\n            onClick={this.onLogoutClick}\n            className=\"btn-flat waves-effect\"\n          >\n            <i className=\"material-icons left\">keyboard_backspace</i> Log Out\n          </button>\n          <h4>\n            <b>Welcome!</b>\n          </h4>\n          <p className=\"grey-text text-darken-1\">\n            Hey there, {user.name.split(\" \")[0]}\n          </p>\n          <h5>\n            <b>Linked Accounts</b>\n          </h5>\n          <p className=\"grey-text text-darken-1\">\n            Add or remove your bank accounts below\n          </p>\n          <ul>{accountItems}</ul>\n          <PlaidLinkButton\n            buttonProps={{\n              className:\n                \"btn btn-large waves-effect waves-light hoverable blue accent-3 main-btn\"\n            }}\n            plaidLinkProps={{\n              clientName: \"BankLinker\",\n              key:\" \",\n              token: \"link-sandbox-4be795dd-ba66-4ee9-ac53-ab8070e47bfc\",\n              env: \"sandbox\",\n              product: [\"transactions\"],\n              onSuccess: this.handleOnSuccess,\n            }}\n            onScriptLoad={() => this.setState({ loaded: true })}\n          >\n            Add Account\n          </PlaidLinkButton>\n          <hr style={{ marginTop: \"2rem\", opacity: \".2\" }} />\n          <h5>\n            <b>Transactions</b>\n          </h5>\n          {transactionsLoading ? (\n            <p className=\"grey-text text-darken-1\">Fetching transactions...</p>\n          ) : (\n            <>\n              <p className=\"grey-text text-darken-1\">\n                You have <b>{transactionsData.length}</b> transactions from your\n                <b> {accounts.length}</b> linked\n                {accounts.length > 1 ? (\n                  <span> accounts </span>\n                ) : (\n                  <span> account </span>\n                )}\n                from the past 30 days\n              </p>\n              <MaterialTable\n                columns={transactionsColumns}\n                data={transactionsData}\n                title=\"Search Transactions\"\n              />\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\nAccounts.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  getTransactions: PropTypes.func.isRequired,\n  addAccount: PropTypes.func.isRequired,\n  deleteAccount: PropTypes.func.isRequired,\n  accounts: PropTypes.array.isRequired,\n  plaid: PropTypes.object.isRequired,\n  user: PropTypes.object.isRequired\n};\nconst mapStateToProps = state => ({\n  plaid: state.plaid\n});\nexport default connect(\n  mapStateToProps,\n  { logoutUser, getTransactions, addAccount, deleteAccount }\n)(Accounts);\n"]},"metadata":{},"sourceType":"module"}